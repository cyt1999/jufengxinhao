# 预约咨询功能实现方案

## 需求
- 管理员可以设置可预约的时间段
- 用户可以预约线上腾讯会议
- 集成到网站的预约咨询按钮

## 方案对比

### 方案一：Calendly（推荐，最简单）

**优点**：
- 免费版功能足够使用
- 设置简单，5分钟即可完成
- 支持自定义样式，可嵌入网站
- 自动发送确认邮件和提醒
- 支持时区自动转换
- 可以手动添加腾讯会议链接

**缺点**：
- 免费版有每月预约次数限制
- 需要手动添加腾讯会议链接（不能自动创建）

**实现方式**：
1. 在 Calendly 创建账号并设置可预约时间
2. 获取嵌入代码
3. 在网站中嵌入 Calendly 组件

### 方案二：Cal.com（开源，可自托管）

**优点**：
- 完全免费，开源
- 可以自托管，数据完全控制
- 支持多种日历集成
- 可以自定义开发

**缺点**：
- 需要自己部署和维护
- 需要配置服务器和数据库
- 腾讯会议集成需要开发

### 方案三：自建预约系统 + 腾讯会议 API

**优点**：
- 完全自定义
- 可以深度集成腾讯会议
- 数据完全控制

**缺点**：
- 开发工作量大
- 需要维护数据库
- 需要申请腾讯会议 API 权限

## 推荐方案：Calendly

考虑到简单性和快速上线，推荐使用 **Calendly**。

### 实现步骤

1. **注册 Calendly**：
   - 访问 https://calendly.com
   - 注册免费账号

2. **设置可预约时间**：
   - 创建 Event Type（如：职业交易员咨询）
   - 设置可用时间段
   - 设置会议时长（如：30分钟）

3. **添加腾讯会议链接**：
   - 在 Event Type 设置中添加"会议地点"
   - 选择"其他会议工具"
   - 输入腾讯会议链接或说明

4. **获取嵌入代码**：
   - 在 Calendly 中获取嵌入代码
   - 可以自定义样式和颜色

5. **集成到网站**：
   - 创建预约咨询页面
   - 嵌入 Calendly 组件
   - 更新预约咨询按钮链接

## 已实现：Calendly 集成

我已经为您创建了预约咨询页面，集成了 Calendly。

### 配置步骤

1. **注册 Calendly 账号**：
   - 访问 https://calendly.com
   - 注册免费账号

2. **创建 Event Type**：
   - 登录后，点击 "Event Types" → "New Event Type"
   - 设置名称：如 "职业交易员咨询"
   - 设置时长：如 30 分钟
   - 设置可用时间段（工作日、周末等）

3. **添加腾讯会议链接**：
   - 在 Event Type 设置中找到 "Location" 或"会议地点"
   - 选择 "Other conferencing tools" 或"其他会议工具"
   - 在描述中添加："我们将通过邮件发送腾讯会议链接"
   - 或者每次预约后手动发送腾讯会议链接

4. **获取 Calendly URL**：
   - 在 Event Type 页面，点击 "Share" 或"分享"
   - 复制 "Link" 或"链接"
   - 格式类似：`https://calendly.com/your-username/event-type-name`

5. **配置到网站**：
   - 在项目根目录的 `.env.local` 文件中添加：
     ```env
     NEXT_PUBLIC_CALENDLY_URL=https://calendly.com/your-username/event-type-name
     ```
   - 或者直接修改 `src/app/consultation/page.tsx` 中的 `CALENDLY_URL` 常量

6. **重启服务器**：
   ```bash
   pnpm dev
   ```

### 已创建的文件

- `src/app/consultation/page.tsx` - 预约咨询页面
- `src/components/ui/CalendlyWidget.tsx` - Calendly 组件
- 已更新 `src/components/ui/FloatingButtons.tsx` - 预约咨询按钮链接

### 功能特点

- ✅ 响应式设计，移动端适配
- ✅ 与网站主题风格一致
- ✅ 自动发送确认邮件
- ✅ 支持时区自动转换
- ✅ 可以设置可用时间段

### 使用流程

1. 用户点击"预约咨询"按钮
2. 跳转到预约咨询页面
3. 在 Calendly 中选择时间
4. 填写姓名和邮箱
5. 提交预约
6. 收到确认邮件（包含预约信息）
7. 管理员收到通知，可以手动发送腾讯会议链接

### 后续优化建议

如果需要自动创建腾讯会议，可以考虑：
- 使用腾讯会议开放 API
- 在预约确认后自动创建会议并发送链接
- 这需要额外的开发工作

